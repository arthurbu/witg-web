<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ - WITG</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        header h1 {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .back-btn {
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            background: rgba(255,255,255,0.2);
            border-radius: 5px;
            float: left;
            transition: background 0.3s;
        }
        
        .back-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .content {
            padding: 30px;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
        }
        
        .tab-btn {
            padding: 12px 25px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 8px 8px 0 0;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .tab-btn.active {
            background: #4CAF50;
            transform: translateY(-2px);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .components-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .component-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border: 2px solid #e9ecef;
            transition: all 0.3s;
        }
        
        .component-card:hover {
            border-color: #4CAF50;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .component-card h3 {
            color: #2E7D32;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #dee2e6;
        }
        
        .component-param {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            padding: 5px 0;
            border-bottom: 1px dashed #dee2e6;
        }
        
        .param-label {
            color: #666;
            font-weight: 500;
        }
        
        .param-value {
            font-weight: 600;
            color: #2E7D32;
        }
        
        .form-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
        }
        
        .form-section h3 {
            color: #2E7D32;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #dee2e6;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }
        
        .form-group input,
        .form-group select {
            padding: 12px 15px;
            border: 2px solid #ced4da;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .btn-danger {
            background: #dc3545;
            color: white;
        }
        
        .btn-danger:hover {
            background: #c82333;
        }
        
        .actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .error {
            color: #dc3545;
            padding: 10px;
            background: #f8d7da;
            border-radius: 5px;
            margin-top: 10px;
            display: none;
        }
        
        .success {
            color: #28a745;
            padding: 10px;
            background: #d4edda;
            border-radius: 5px;
            margin-top: 10px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="/" class="back-btn">‚Üê –ù–∞–∑–∞–¥</a>
            <h1>üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏</h1>
            <p>–ë–∞–∑—ã –º—É–Ω–¥—à—Ç—É–∫–æ–≤, —Ç—Ä—É–±–æ–∫ –∏ —Ä–∞—Å—Ç—Ä—É–±–æ–≤</p>
        </header>
        
        <div class="content">
            <div class="tabs">
                <button class="tab-btn active" data-tab="mouthpieces">üé∫ –ú—É–Ω–¥—à—Ç—É–∫–∏</button>
                <button class="tab-btn" data-tab="tubes">üéµ –¢—Ä—É–±–∫–∏</button>
                <button class="tab-btn" data-tab="bells">üé∑ –†–∞—Å—Ç—Ä—É–±—ã</button>
            </div>
            
            <!-- –ú—É–Ω–¥—à—Ç—É–∫–∏ -->
            <div id="mouthpieces-tab" class="tab-content active">
                <div class="form-section">
                    <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –º—É–Ω–¥—à—Ç—É–∫</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="mp-name">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                            <input type="text" id="mp-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Yamaha C5 + Boch3">
                        </div>
                        <div class="form-group">
                            <label for="mp-type">–¢–∏–ø</label>
                            <select id="mp-type">
                                <option value="clarinet">–ö–ª–∞—Ä–Ω–µ—Ç–Ω—ã–π</option>
                                <option value="sax">–°–∞–∫—Å–æ—Ñ–æ–Ω–Ω—ã–π</option>
                                <option value="native">–ù–∞—Ç–∏–≤–Ω—ã–π</option>
                                <option value="flute">–§–ª–µ–π—Ç–æ–≤—ã–π</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="mp-brand">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å</label>
                            <input type="text" id="mp-brand" placeholder="Yamaha, Selmer –∏ —Ç.–¥.">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="mp-inner-diameter">–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –¥–∏–∞–º–µ—Ç—Ä (–º–º)</label>
                            <input type="number" id="mp-inner-diameter" step="0.1" value="14.7">
                        </div>
                        <div class="form-group">
                            <label for="mp-outer-diameter">–í–Ω–µ—à–Ω–∏–π –¥–∏–∞–º–µ—Ç—Ä (–º–º)</label>
                            <input type="number" id="mp-outer-diameter" step="0.1" value="16.0">
                        </div>
                        <div class="form-group">
                            <label for="mp-length">–î–ª–∏–Ω–∞ (–º–º)</label>
                            <input type="number" id="mp-length" step="0.1" value="85.0">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="mp-end-correction">–≠–Ω–¥-–∫–æ—Ä—Ä–µ–∫—Ü–∏—è (–º–º)</label>
                            <input type="number" id="mp-end-correction" step="0.1" value="15.0">
                            <small>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –¥–ª—è –∞–∫—É—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞</small>
                        </div>
                        <div class="form-group">
                            <label for="mp-embouchure">–¢–∏–ø –∞–º–±—É—à—é—Ä–∞</label>
                            <select id="mp-embouchure">
                                <option value="rounded">–ó–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–π</option>
                                <option value="flat">–ü–ª–æ—Å–∫–∏–π</option>
                                <option value="v-shaped">V-–æ–±—Ä–∞–∑–Ω—ã–π</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="mp-material">–ú–∞—Ç–µ—Ä–∏–∞–ª</label>
                            <select id="mp-material">
                                <option value="plastic">–ü–ª–∞—Å—Ç–∏–∫</option>
                                <option value="ebonite">–≠–±–æ–Ω–∏—Ç</option>
                                <option value="metal">–ú–µ—Ç–∞–ª–ª</option>
                                <option value="wood">–î–µ—Ä–µ–≤–æ</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="mp-error" class="error"></div>
                    <div id="mp-success" class="success"></div>
                    
                    <div class="actions">
                        <button class="btn btn-primary" onclick="addMouthpiece()">
                            ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –º—É–Ω–¥—à—Ç—É–∫
                        </button>
                        <button class="btn btn-secondary" onclick="resetMouthpieceForm()">
                            üîÑ –°–±—Ä–æ—Å–∏—Ç—å —Ñ–æ—Ä–º—É
                        </button>
                    </div>
                </div>
                
                <h2>üìã –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º—É–Ω–¥—à—Ç—É–∫–∏</h2>
                <div id="mouthpieces-loading" class="loading">
                    –ó–∞–≥—Ä—É–∑–∫–∞ –º—É–Ω–¥—à—Ç—É–∫–æ–≤...
                </div>
                <div class="components-grid" id="mouthpieces-list">
                    <!-- –°–ø–∏—Å–æ–∫ –º—É–Ω–¥—à—Ç—É–∫–æ–≤ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                </div>
            </div>
            
            <!-- –¢—Ä—É–±–∫–∏ -->
            <div id="tubes-tab" class="tab-content">
                <div class="form-section">
                    <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ç—Ä—É–±–∫—É</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tube-name">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                            <input type="text" id="tube-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: PVC 20mm">
                        </div>
                        <div class="form-group">
                            <label for="tube-material">–ú–∞—Ç–µ—Ä–∏–∞–ª</label>
                            <select id="tube-material">
                                <option value="pvc">PVC</option>
                                <option value="bamboo">–ë–∞–º–±—É–∫</option>
                                <option value="metal">–ú–µ—Ç–∞–ª–ª</option>
                                <option value="wood">–î–µ—Ä–µ–≤–æ</option>
                                <option value="carbon">–ö–∞—Ä–±–æ–Ω</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="tube-form">–§–æ—Ä–º–∞ —Å–µ—á–µ–Ω–∏—è</label>
                            <select id="tube-form">
                                <option value="round">–ö—Ä—É–≥–ª–∞—è</option>
                                <option value="oval">–û–≤–∞–ª—å–Ω–∞—è</option>
                                <option value="rectangular">–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tube-inner-diameter">–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –¥–∏–∞–º–µ—Ç—Ä (–º–º)</label>
                            <input type="number" id="tube-inner-diameter" step="0.1" value="20.0">
                        </div>
                        <div class="form-group">
                            <label for="tube-outer-diameter">–í–Ω–µ—à–Ω–∏–π –¥–∏–∞–º–µ—Ç—Ä (–º–º)</label>
                            <input type="number" id="tube-outer-diameter" step="0.1" value="22.0">
                        </div>
                        <div class="form-group">
                            <label for="tube-wall-thickness">–¢–æ–ª—â–∏–Ω–∞ —Å—Ç–µ–Ω–∫–∏ (–º–º)</label>
                            <input type="number" id="tube-wall-thickness" step="0.1" value="1.0">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tube-expansion">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è</label>
                            <input type="number" id="tube-expansion" step="0.001" value="1.0">
                            <small>1.0 = —Ü–∏–ª–∏–Ω–¥—Ä, >1.0 = –∫–æ–Ω—É—Å</small>
                        </div>
                        <div class="form-group">
                            <label for="tube-standard-length">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –¥–ª–∏–Ω–∞ (–º–º)</label>
                            <input type="number" id="tube-standard-length" value="500.0">
                        </div>
                        <div class="form-group">
                            <label for="tube-density">–ü–ª–æ—Ç–Ω–æ—Å—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (–≥/—Å–º¬≥)</label>
                            <input type="number" id="tube-density" step="0.01" value="1.38">
                        </div>
                    </div>
                    
                    <div id="tube-error" class="error"></div>
                    <div id="tube-success" class="success"></div>
                    
                    <div class="actions">
                        <button class="btn btn-primary" onclick="addTube()">
                            ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä—É–±–∫—É
                        </button>
                        <button class="btn btn-secondary" onclick="resetTubeForm()">
                            üîÑ –°–±—Ä–æ—Å–∏—Ç—å —Ñ–æ—Ä–º—É
                        </button>
                    </div>
                </div>
                
                <h2>üìã –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç—Ä—É–±–∫–∏</h2>
                <div id="tubes-loading" class="loading">
                    –ó–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä—É–±–æ–∫...
                </div>
                <div class="components-grid" id="tubes-list">
                    <!-- –°–ø–∏—Å–æ–∫ —Ç—Ä—É–±–æ–∫ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                </div>
            </div>
            
            <!-- –†–∞—Å—Ç—Ä—É–±—ã -->
            <div id="bells-tab" class="tab-content">
                <div class="form-section">
                    <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ä–∞—Å—Ç—Ä—É–±</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="bell-name">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                            <input type="text" id="bell-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–∞–ª—ã–π —Ä–∞—Å—Ç—Ä—É–±">
                        </div>
                        <div class="form-group">
                            <label for="bell-type">–¢–∏–ø</label>
                            <select id="bell-type">
                                <option value="flare">–†–∞—Å—à–∏—Ä—è—é—â–∏–π—Å—è</option>
                                <option value="straight">–ü—Ä—è–º–æ–π</option>
                                <option value="none">–ë–µ–∑ —Ä–∞—Å—Ç—Ä—É–±–∞</option>
                                <option value="exponential">–≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="bell-material">–ú–∞—Ç–µ—Ä–∏–∞–ª</label>
                            <select id="bell-material">
                                <option value="same">–ö–∞–∫ —É —Ç—Ä—É–±–∫–∏</option>
                                <option value="metal">–ú–µ—Ç–∞–ª–ª</option>
                                <option value="plastic">–ü–ª–∞—Å—Ç–∏–∫</option>
                                <option value="wood">–î–µ—Ä–µ–≤–æ</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="bell-start-diameter">–î–∏–∞–º–µ—Ç—Ä –Ω–∞—á–∞–ª–∞ (–º–º)</label>
                            <input type="number" id="bell-start-diameter" step="0.1" value="22.0">
                        </div>
                        <div class="form-group">
                            <label for="bell-end-diameter">–î–∏–∞–º–µ—Ç—Ä –∫–æ–Ω—Ü–∞ (–º–º)</label>
                            <input type="number" id="bell-end-diameter" step="0.1" value="35.0">
                        </div>
                        <div class="form-group">
                            <label for="bell-length">–î–ª–∏–Ω–∞ (–º–º)</label>
                            <input type="number" id="bell-length" step="0.1" value="80.0">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="bell-expansion-ratio">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è</label>
                            <input type="number" id="bell-expansion-ratio" step="0.01" value="1.6">
                            <small>–û—Ç–Ω–æ—à–µ–Ω–∏–µ –∫–æ–Ω–µ—á–Ω–æ–≥–æ –¥–∏–∞–º–µ—Ç—Ä–∞ –∫ –Ω–∞—á–∞–ª—å–Ω–æ–º—É</small>
                        </div>
                        <div class="form-group">
                            <label for="bell-flare-angle">–£–≥–æ–ª —Ä–∞—Å–∫—Ä—ã—Ç–∏—è (¬∞)</label>
                            <input type="number" id="bell-flare-angle" step="0.1" value="15.0">
                        </div>
                        <div class="form-group">
                            <label for="bell-wall-thickness">–¢–æ–ª—â–∏–Ω–∞ —Å—Ç–µ–Ω–∫–∏ (–º–º)</label>
                            <input type="number" id="bell-wall-thickness" step="0.1" value="1.5">
                        </div>
                    </div>
                    
                    <div id="bell-error" class="error"></div>
                    <div id="bell-success" class="success"></div>
                    
                    <div class="actions">
                        <button class="btn btn-primary" onclick="addBell()">
                            ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ç—Ä—É–±
                        </button>
                        <button class="btn btn-secondary" onclick="resetBellForm()">
                            üîÑ –°–±—Ä–æ—Å–∏—Ç—å —Ñ–æ—Ä–º—É
                        </button>
                    </div>
                </div>
                
                <h2>üìã –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–∞—Å—Ç—Ä—É–±—ã</h2>
                <div id="bells-loading" class="loading">
                    –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å—Ç—Ä—É–±–æ–≤...
                </div>
                <div class="components-grid" id="bells-list">
                    <!-- –°–ø–∏—Å–æ–∫ —Ä–∞—Å—Ç—Ä—É–±–æ–≤ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–∞–º–∏
        document.addEventListener('DOMContentLoaded', function() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
            loadMouthpieces();
            loadTubes();
            loadBells();
            
            // –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ç–∞–±–æ–≤
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    
                    // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Ç–∞–±—ã
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
                    document.querySelectorAll('.tab-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–∞–±
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                    this.classList.add('active');
                });
            });
        });
        
        // ========== –ú–£–ù–î–®–¢–£–ö–ò ==========
        
        async function loadMouthpieces() {
            try {
                const response = await fetch('/api/mouthpieces');
                const data = await response.json();
                
                document.getElementById('mouthpieces-loading').style.display = 'none';
                const container = document.getElementById('mouthpieces-list');
                container.innerHTML = '';
                
                if (data.mouthpieces && data.mouthpieces.length > 0) {
                    data.mouthpieces.forEach(mp => {
                        const card = createMouthpieceCard(mp);
                        container.appendChild(card);
                    });
                } else {
                    container.innerHTML = '<p style="text-align: center; color: #666;">–ú—É–Ω–¥—à—Ç—É–∫–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</p>';
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º—É–Ω–¥—à—Ç—É–∫–æ–≤:', error);
                document.getElementById('mouthpieces-loading').innerHTML = 
                    '<p style="color: red;">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</p>';
            }
        }
        
        function createMouthpieceCard(mp) {
            const card = document.createElement('div');
            card.className = 'component-card';
            card.innerHTML = `
                <h3>${mp.name}</h3>
                <div class="component-param">
                    <span class="param-label">–¢–∏–ø:</span>
                    <span class="param-value">${mp.type || '–ù–µ —É–∫–∞–∑–∞–Ω'}</span>
                </div>
                <div class="component-param">
                    <span class="param-label">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å:</span>
                    <span class="param-value">${mp.brand || '-'}</span>
                </div>
                <div class="component-param">
                    <span class="param-label">–í–Ω—É—Ç—Ä. –¥–∏–∞–º–µ—Ç—Ä:</span>
                    <span class="param-value">${mp.inner_diameter || '?'} –º–º</span>
                </div>
                <div class="component-param">
                    <span class="param-label">–≠–Ω–¥-–∫–æ—Ä—Ä–µ–∫—Ü–∏—è:</span>
                    <span class="param-value">${mp.end_correction || '?'} –º–º</span>
                </div>
                <div class="component-param">
                    <span class="param-label">–ú–∞—Ç–µ—Ä–∏–∞–ª:</span>
                    <span class="param-value">${mp.material || '–ù–µ —É–∫–∞–∑–∞–Ω'}</span>
                </div>
                <div style="margin-top: 15px; text-align: right;">
                    <button onclick="deleteComponent('mouthpieces', ${mp.id})" class="btn btn-danger" style="padding: 5px 10px; font-size: 14px;">
                        –£–¥–∞–ª–∏—Ç—å
                    </button>
                </div>
            `;
            return card;
        }
        
        async function addMouthpiece() {
            const data = {
                name: document.getElementById('mp-name').value.trim(),
                type: document.getElementById('mp-type').value,
                brand: document.getElementById('mp-brand').value.trim(),
                inner_diameter: parseFloat(document.getElementById('mp-inner-diameter').value),
                outer_diameter: parseFloat(document.getElementById('mp-outer-diameter').value),
                length: parseFloat(document.getElementById('mp-length').value),
                end_correction: parseFloat(document.getElementById('mp-end-correction').value),
                embouchure: document.getElementById('mp-embouchure').value,
                material: document.getElementById('mp-material').value
            };
            
            if (!data.name) {
                showError('mp-error', '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º—É–Ω–¥—à—Ç—É–∫–∞');
                return;
            }
            
            try {
                const response = await fetch('/api/mouthpieces', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    showSuccess('mp-success', '–ú—É–Ω–¥—à—Ç—É–∫ –¥–æ–±–∞–≤–ª–µ–Ω!');
                    resetMouthpieceForm();
                    loadMouthpieces();
                } else {
                    showError('mp-error', result.error || '–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏');
                }
            } catch (error) {
                showError('mp-error', `–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`);
            }
        }
        
        function resetMouthpieceForm() {
            document.getElementById('mp-name').value = '';
            document.getElementById('mp-type').value = 'clarinet';
            document.getElementById('mp-brand').value = '';
            document.getElementById('mp-inner-diameter').value = '14.7';
            document.getElementById('mp-outer-diameter').value = '16.0';
            document.getElementById('mp-length').value = '85.0';
            document.getElementById('mp-end-correction').value = '15.0';
            document.getElementById('mp-embouchure').value = 'rounded';
            document.getElementById('mp-material').value = 'plastic';
            hideMessages('mp');
        }
        
        // ========== –¢–†–£–ë–ö–ò ==========
        
        async function loadTubes() {
            try {
                const response = await fetch('/api/tubes');
                const data = await response.json();
                
                document.getElementById('tubes-loading').style.display = 'none';
                const container = document.getElementById('tubes-list');
                container.innerHTML = '';
                
                if (data.tubes && data.tubes.length > 0) {
                    data.tubes.forEach(tube => {
                        const card = createTubeCard(tube);
                        container.appendChild(card);
                    });
                } else {
                    container.innerHTML = '<p style="text-align: center; color: #666;">–¢—Ä—É–±–æ–∫ –ø–æ–∫–∞ –Ω–µ—Ç</p>';
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç—Ä—É–±–æ–∫:', error);
                document.getElementById('tubes-loading').innerHTML = 
                    '<p style="color: red;">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</p>';
            }
        }
        
        function createTubeCard(tube) {
            const wallThickness = tube.wall_thickness || (tube.outer_diameter - tube.inner_diameter);
            
            const card = document.createElement('div');
            card.className = 'component-card';
            card.innerHTML = `
                <h3>${tube.name}</h3>
                <div class="component-param">
                    <span class="param-label">–ú–∞—Ç–µ—Ä–∏–∞–ª:</span>
                    <span class="param-value">${tube.material || '–ù–µ —É–∫–∞–∑–∞–Ω'}</span>
                </div>
                <div class="component-param">
                    <span class="param-label">–§–æ—Ä–º–∞:</span>
                    <span class="param-value">${tube.form || '–ö—Ä—É–≥–ª–∞—è'}</span>
                </div>
                <div class="component-param">
                    <span class="param-label">–í–Ω—É—Ç—Ä. –¥–∏–∞–º–µ—Ç—Ä:</span>
                    <span class="param-value">${tube.inner_diameter || '?'} –º–º</span>
                </div>
                <div class="component-param">
                    <span class="param-label">–¢–æ–ª—â–∏–Ω–∞ —Å—Ç–µ–Ω–∫–∏:</span>
                    <span class="param-value">${wallThickness.toFixed(1)} –º–º</span>
                </div>
                <div class="component-param">
                    <span class="param-label">–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ:</span>
                    <span class="param-value">${tube.expansion || 1.0}</span>
                </div>
                <div style="margin-top: 15px; text-align: right;">
                    <button onclick="deleteComponent('tubes', ${tube.id})" class="btn btn-danger" style="padding: 5px 10px; font-size: 14px;">
                        –£–¥–∞–ª–∏—Ç—å
                    </button>
                </div>
            `;
            return card;
        }
        
        async function addTube() {
            const data = {
                name: document.getElementById('tube-name').value.trim(),
                material: document.getElementById('tube-material').value,
                form: document.getElementById('tube-form').value,
                inner_diameter: parseFloat(document.getElementById('tube-inner-diameter').value),
                outer_diameter: parseFloat(document.getElementById('tube-outer-diameter').value),
                wall_thickness: parseFloat(document.getElementById('tube-wall-thickness').value),
                expansion: parseFloat(document.getElementById('tube-expansion').value),
                standard_length: parseFloat(document.getElementById('tube-standard-length').value),
                density: parseFloat(document.getElementById('tube-density').value)
            };
            
            if (!data.name) {
                showError('tube-error', '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä—É–±–∫–∏');
                return;
            }
            
            try {
                const response = await fetch('/api/tubes', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    showSuccess('tube-success', '–¢—Ä—É–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞!');
                    resetTubeForm();
                    loadTubes();
                } else {
                    showError('tube-error', result.error || '–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏');
                }
            } catch (error) {
                showError('tube-error', `–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`);
            }
        }
        
        function resetTubeForm() {
            document.getElementById('tube-name').value = '';
            document.getElementById('tube-material').value = 'pvc';
            document.getElementById('tube-form').value = 'round';
            document.getElementById('tube-inner-diameter').value = '20.0';
            document.getElementById('tube-outer-diameter').value = '22.0';
            document.getElementById('tube-wall-thickness').value = '1.0';
            document.getElementById('tube-expansion').value = '1.0';
            document.getElementById('tube-standard-length').value = '500.0';
            document.getElementById('tube-density').value = '1.38';
            hideMessages('tube');
        }
        
        // ========== –†–ê–°–¢–†–£–ë–´ ==========
        
        async function loadBells() {
            try {
                const response = await fetch('/api/bells');
                const data = await response.json();
                
                document.getElementById('bells-loading').style.display = 'none';
                const container = document.getElementById('bells-list');
                container.innerHTML = '';
                
                if (data.bells && data.bells.length > 0) {
                    data.bells.forEach(bell => {
                        const card = createBellCard(bell);
                        container.appendChild(card);
                    });
                } else {
                    container.innerHTML = '<p style="text-align: center; color: #666;">–†–∞—Å—Ç—Ä—É–±–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</p>';
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞—Å—Ç—Ä—É–±–æ–≤:', error);
                document.getElementById('bells-loading').innerHTML = 
                    '<p style="color: red;">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</p>';
            }
        }
        
        function createBellCard(bell) {
            const card = document.createElement('div');
            card.className = 'component-card';
            card.innerHTML = `
                <h3>${bell.name}</h3>
                <div class="component-param">
                    <span class="param-label">–¢–∏–ø:</span>
                    <span class="param-value">${bell.type || '–ù–µ —É–∫–∞–∑–∞–Ω'}</span>
                </div>
                <div class="component-param">
                    <span class="param-label">–ù–∞—á–∞–ª—å–Ω—ã–π –¥–∏–∞–º–µ—Ç—Ä:</span>
                    <span class="param-value">${bell.start_diameter || '?'} –º–º</span>
                </div>
                <div class="component-param">
                    <span class="param-label">–ö–æ–Ω–µ—á–Ω—ã–π –¥–∏–∞–º–µ—Ç—Ä:</span>
                    <span class="param-value">${bell.end_diameter || '?'} –º–º</span>
                </div>
                <div class="component-param">
                    <span class="param-label">–î–ª–∏–Ω–∞:</span>
                    <span class="param-value">${bell.length || '?'} –º–º</span>
                </div>
                <div class="component-param">
                    <span class="param-label">–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ:</span>
                    <span class="param-value">${bell.expansion_ratio || 1.0}</span>
                </div>
                <div style="margin-top: 15px; text-align: right;">
                    <button onclick="deleteComponent('bells', ${bell.id})" class="btn btn-danger" style="padding: 5px 10px; font-size: 14px;">
                        –£–¥–∞–ª–∏—Ç—å
                    </button>
                </div>
            `;
            return card;
        }
        
        async function addBell() {
            const data = {
                name: document.getElementById('bell-name').value.trim(),
                type: document.getElementById('bell-type').value,
                material: document.getElementById('bell-material').value,
                start_diameter: parseFloat(document.getElementById('bell-start-diameter').value),
                end_diameter: parseFloat(document.getElementById('bell-end-diameter').value),
                length: parseFloat(document.getElementById('bell-length').value),
                expansion_ratio: parseFloat(document.getElementById('bell-expansion-ratio').value),
                flare_angle: parseFloat(document.getElementById('bell-flare-angle').value),
                wall_thickness: parseFloat(document.getElementById('bell-wall-thickness').value)
            };
            
            if (!data.name) {
                showError('bell-error', '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–∞—Å—Ç—Ä—É–±–∞');
                return;
            }
            
            try {
                const response = await fetch('/api/bells', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    showSuccess('bell-success', '–†–∞—Å—Ç—Ä—É–± –¥–æ–±–∞–≤–ª–µ–Ω!');
                    resetBellForm();
                    loadBells();
                } else {
                    showError('bell-error', result.error || '–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏');
                }
            } catch (error) {
                showError('bell-error', `–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`);
            }
        }
        
        function resetBellForm() {
            document.getElementById('bell-name').value = '';
            document.getElementById('bell-type').value = 'flare';
            document.getElementById('bell-material').value = 'same';
            document.getElementById('bell-start-diameter').value = '22.0';
            document.getElementById('bell-end-diameter').value = '35.0';
            document.getElementById('bell-length').value = '80.0';
            document.getElementById('bell-expansion-ratio').value = '1.6';
            document.getElementById('bell-flare-angle').value = '15.0';
            document.getElementById('bell-wall-thickness').value = '1.5';
            hideMessages('bell');
        }
        
        // ========== –û–ë–©–ò–ï –§–£–ù–ö–¶–ò–ò ==========
        
        async function deleteComponent(type, id) {
            if (!confirm(`–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç ${getComponentName(type)}?`)) {
                return;
            }
            
            try {
                const response = await fetch(`/api/${type}/${id}`, {
                    method: 'DELETE'
                });
                
                if (response.ok) {
                    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫
                    if (type === 'mouthpieces') loadMouthpieces();
                    else if (type === 'tubes') loadTubes();
                    else if (type === 'bells') loadBells();
                } else {
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏');
                }
            } catch (error) {
                alert(`–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`);
            }
        }
        
        function getComponentName(type) {
            const names = {
                'mouthpieces': '–º—É–Ω–¥—à—Ç—É–∫',
                'tubes': '—Ç—Ä—É–±–∫—É',
                'bells': '—Ä–∞—Å—Ç—Ä—É–±'
            };
            return names[type] || '–∫–æ–º–ø–æ–Ω–µ–Ω—Ç';
        }
        
        function showError(elementId, message) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.style.display = 'block';
            setTimeout(() => {
                element.style.display = 'none';
            }, 5000);
        }
        
        function showSuccess(elementId, message) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.style.display = 'block';
            setTimeout(() => {
                element.style.display = 'none';
            }, 3000);
        }
        
        function hideMessages(prefix) {
            document.getElementById(`${prefix}-error`).style.display = 'none';
            document.getElementById(`${prefix}-success`).style.display = 'none';
        }
    </script>
</body>
</html> 